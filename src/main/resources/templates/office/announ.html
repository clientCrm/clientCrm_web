<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>办公室-任务</title>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="base/plugins/jquery/jquery.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="base/dist/css/adminlte.min.css" th:href="@{base/dist/css/adminlte.min.css}">
    <link rel="stylesheet" href="base/plugins/overlayScrollbars/css/OverlayScrollbars.min.css" th:href="@{base/plugins/overlayScrollbars/css/OverlayScrollbars.min.css}">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="./css/common.css"  th:href="@{css/common.css}">
    <!--导入bootstript-->
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!--导入分页的js-->
    <script src="base/plugins/bootstrap/js/pageAnalyse.js"></script>
</head>
<style>
.time{
    padding-left: 10px;
    color: #9D9D9D;
    font-size: 10px;
}
.dep{
    padding-left: 10px;
    border-bottom:2px  #FFFCEC solid;
}

    .text{
        background-color: 	#ACD6FF ;
        text-indent: 4em;
        margin-bottom: 10px;
        height: 60px;
        display: block;
        overflow: hidden;
    }

</style>
<body class="hold-transition sidebar-mini layout-fixed">
<div id="app">

    <el-container>
        <el-header >
            <div th:replace ="~{common/navbar::navbar}"></div>
        </el-header>
        <el-container>
            <el-aside width="200px"><div th:insert="~{common/work/aside::aside}" ></div></el-aside>
            <el-container>
                <el-main>
                    <!--弹出层模拟-->
                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog modal-lg" style="height: 70%;" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" style="position: absolute;margin-right: 0px" id="myModalLabel">新增</h4>
                                </div>
                                <form id="formTest" action="#">
                                <div class="modal-body">

                                    <div class="form-group">
                                        <label for="txt_departmentname">部门名称</label>
                                        <input type="text" name="txt_departmentname"  id="txt_departmentname" placeholder="部门名称">
                                    </div>
                                    <div class="form-group">
                                        <label for="txt_parentdepartment">上级部门</label>
                                        <input type="text" name="txt_parentdepartment"  id="txt_parentdepartment" placeholder="上级部门">
                                    </div>



                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal" onclick="test()"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>提交</button>
                                    <button type="button" id="btn_submit" class="btn btn-primary"  onclick="reset()" ><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>重置</button>
                                </div>
                                </form>
                            </div>
                        </div>
                    </div>

                   <div class="container-fluid">
                       <!-- &lt;!&ndash;导航条&ndash;&gt;-->
                        <div class="row dep">
                                <div class="col-md-1">
                                    <a href="#">公告</a>
                                </div>
                            <div class="col-md-offset-6 col-md-2">
                                    <button style="color: blue" id="addAnnoun">新建公告</button>
                            </div>

                        </div>
                    </div>
<!--新建一行放置公告状态-->
                       <div class="row" style="padding-top: 20px;">
                            <div class="col-md-2 " >
                            公告状态  &nbsp;
                                <select style="width:80px;" onchange="getAnnounByStatus(this.value)">
                                    <option   value="公示中">公示中</option>
                                    <option value="已结束">已结束</option>
                                </select>
                                </div>
                            </div>

                    <div id="content" >
                     <!--   <div class="row dep" style="padding-top: 30px">
                            <div>
                                <span>悟空</span><br>
                                <font class="time">2019/12/12</font>
                                <br>
                                <h5>h5. Bootstrap heading</h5>

                                <p class="text" >横道河子镇是牡丹江  通往哈尔滨  的咽喉要道，301国道  和缤绥铁路穿越全境，距省会哈尔滨253公里，距牡丹江市45公里，距绥芬河口岸  210公里，距海林市33公里，距国际航空港牡丹江机场  54公里，交通十分发达。横道河子镇行政区总面积为794平方公里，城镇规划  区面积为7.85平方公里。镇内有2个社区，辖6个行政村，总人口32000人。
                                    该镇有着悠久的历史与文化脉络，由于1897年中东铁路  的修建而使其得以发展，自沙俄  经营中东铁路至日伪时期，当年商贾云集，高楼林立，有“花园城镇”之称，由于独特的俄罗斯文化资源优势，使横道河子在俄罗斯和国内都享有一定的知名度。全省唯一的木制东正教堂  ，中东铁路机车库、大白楼都完整的保留至今，并有近200处俄式建筑留存下来，其中市级保护建筑104栋，国家级保护建筑5处。新建的中东铁路运输博物馆、油画村、剧照馆、王洛宾纪念馆、中共海林党史纪念馆等展馆也极大地丰富了横道河镇的旅游资源，如今横道河子俄罗斯小镇风景区已经获批国家AAAA级景区。。
                                东正教堂、机车库、木格楞、俄式民宅，俄式办公楼，小镇依山就势错落有致的建筑，完全是俄罗斯乡间别墅的布局，最为珍贵的是，横道河子的老建筑保护得非常好，几乎没被破坏。
                                    没有了战争，教堂的钟声也远去了，可这些俄式古屋却仍然显示着小镇异域风情的存在。现在横道河子小镇的人依然喜欢喝啤酒、果酒和烈性白酒，喜欢吃火腿肠、面包和果酱，人们的生活仍旧带有俄罗斯民族的习俗。
                                    择一城终老，横道河子古镇真的是一处可以安放灵魂的地方，宁静、祥和、缓慢。
                                东正教堂、机车库、木格楞、俄式民宅，俄式办公楼，小镇依山就势错落有致的建筑，完全是俄罗斯乡间别墅的布局，最为珍贵的是，横道河子的老建筑保护得非常好，几乎没被破坏。
                                    没有了战争，教堂的钟声也远去了，可这些俄式古屋却仍然显示着小镇异域风情的存在。现在横道河子小镇的人依然喜欢喝啤酒、果酒和烈性白酒，喜欢吃火腿肠、面包和果酱，人们的生活仍旧带有俄罗斯民族的习俗。
                                    择一城终老，横道河子古镇真的是一处可以安放灵魂的地方，宁静、祥和、缓慢
                               东正教堂、机车库、木格楞、俄式民宅，俄式办公楼，小镇依山就势错落有致的建筑，完全是俄罗斯乡间别墅的布局，最为珍贵的是，横道河子的老建筑保护得非常好，几乎没被破坏。
                                    没有了战争，教堂的钟声也远去了，可这些俄式古屋却仍然显示着小镇异域风情的存在。现在横道河子小镇的人依然喜欢喝啤酒、果酒和烈性白酒，喜欢吃火腿肠、面包和果酱，人们的生活仍旧带有俄罗斯民族的习俗。
                                    择一城终老，横道河子古镇真的是一处可以安放灵魂的地方，宁静、祥和、缓慢
                                ————————————————
                                版权声明：本文为CSDN博主「Micky米」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
                                原文链接：https://blog.csdn.net/JJMM2009/article/details/72358201
                                </p>
                                <a href="javascript:void(0);" onclick="allView($(this),$(this).prev())">展开全文....</a>
                            </div>


                        </div>
-->

                    </div>
                            <!--&lt;!&ndash;显示分页&ndash;&gt;-->
                            <div class="row pagination pagination-centered">
                                <nav aria-label="Page navigation">
                                    <ul id="pageDiv" class="pagination">

                                    </ul>
                                </nav>

                            </div>


                </el-main>
                <el-footer>
                    <div th:insert="~{common/footer::footer}"></div>
                </el-footer>
            </el-container>
        </el-container>
    </el-container>
</div>
</body>

<script >
    new Vue({
        el: '#app',
        data: function() {
            return { visible: false }
        }
    })
</script>
<script>

    $("#addAnnoun").click(function () {

        $("#myModalLabel").text("新增");
        $('#myModal').modal();
    })
    //ajax表单提交
    function test() {


    }
    //表单重置
    function resetFrom() {
            alert("重置");
            $("#formTest").reset();
    }


    function allView(a,prev) {
        console.log(prev.text());
        alert(a.text());
        if(a.text()=="展开全文....") {
            //设置样式为可显示
            prev.css("height", "300px");
            //设置a为收起
            a.text("收起全文....");
        }
        else{
            //设置样式为可显示
            prev.css("height", "54px");
            //设置a为收起
            a.text("展开全文....");
        }

    }
    var configArray = new Array();
    configArray["selector"] = "#pageDiv";
    configArray["methodName"] = "toPage";
    <!-- 选择下拉框执行ajax -->
            function getAnnounByStatus(value) {
                        toPage(3,value,1,4);
            }


    function toPage(crmUserId,value,page, rows) {

        $.ajax({
            url:"http://www.clientest.com/bangong/Announ/getAnnounByStatus",
            type:"GET",
            data:{crmUserId:3,value:value,page:page,rows:rows},
            dataType:"JSON",
            success: function(data) {
            console.log(data.items.length+'长度');
                if(data.items==null) {
                    alert("获取公告列表失败, 请刷新页面!");
                    return;
                }
                configArray["totalPage"] = data.totalPage;
                configArray["currentPage"] = data.page;
                configArray["pageSize"] = data.rows;
                configArray["crmUserId"]=crmUserId;
                configArray["value"]=value;
                var str = "";
                var list = data.items;
                console.log("长度为:"+list.length);
                for(var i=0; i<list.length; i++) {
                    console.log("第"+i+'条记录的内容'+list[i].content+"\n");
                    str +=
                        "<div class='row dep' style='padding-top: 30px'><div>"+
                    "<span>"+list[i].username+"</span><br>"+
                    " <font class='time'> "+list[i].createTime+"</font><br>"+
                    " <h5>"+list[i].title+"</h5>"+
                    "<p class='text' >"+list[i].content+" </p>"+
                    "<a href='javascript:void(0);' onclick='allView($(this),$(this).prev())'>"+"展开全文...."+"</a>"+
                    " </div></div>"
                }
                //设置
                $("#content").html(str);
                //分页
                pageAnalyse(configArray);

            }
        });
    }

   </script>


</html>